<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lara Control</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.0/lucide.min.js"></script>
    <style>
        :root { --primary: #3b82f6; --bg: #0f172a; }
        body { background-color: var(--bg); color: #f1f5f9; font-family: sans-serif; margin:0; padding-bottom: 90px; }
        .glass { background: rgba(30, 41, 59, 0.85); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.1); }
        .nav-btn { display: flex; flex-direction: column; align-items: center; font-size: 0.7rem; color: #94a3b8; flex: 1; border:none; background:none; padding: 12px; cursor: pointer; }
        .nav-active { color: var(--primary); font-weight: bold; }
        input, select, textarea { background: #1e293b !important; border: 1px solid #334155 !important; color: white !important; padding: 14px; border-radius: 10px; width: 100%; font-size: 16px; margin-bottom: 12px; box-sizing: border-box; display: block; }
        .btn-blue { background: #2563eb; color: white; font-weight: bold; padding: 16px; border-radius: 12px; width: 100%; border: none; cursor: pointer; -webkit-appearance: none; font-size: 16px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }
        .btn-blue:active { background: #1d4ed8; transform: scale(0.98); }
        label { font-size: 11px; color: #94a3b8; text-transform: uppercase; font-weight: bold; margin-bottom: 4px; display: block; padding-left: 4px; }
    </style>
</head>
<body>

    <div id="welcome" class="fixed inset-0 z-50 bg-[#0f172a] flex flex-col items-center justify-center p-6 text-center">
        <div class="w-32 h-32 bg-white p-2 rounded-3xl mb-4 shadow-2xl flex items-center justify-center">
            <img src="aa.jpg" alt="Logo" class="max-w-full max-h-full object-contain">
        </div>
        <h1 class="text-3xl font-black mb-1 text-white uppercase tracking-tighter">LARA CONTROL</h1>
        <p class="text-slate-400 mb-8 text-sm">Control de Viajes y Finanzas</p>
        <button onclick="document.getElementById('welcome').style.display='none'" class="btn-blue max-w-xs">INGRESAR</button>
    </div>

    <header class="p-4 flex justify-between items-center glass sticky top-0 z-30 border-b border-white/5">
        <span id="section-title" class="font-black text-blue-400 tracking-widest text-sm">REGISTROS</span>
        <div class="h-10 w-10 bg-white rounded-lg p-1 flex items-center justify-center overflow-hidden">
            <img src="aa.jpg" class="max-w-full max-h-full object-contain">
        </div>
    </header>

    <main class="p-4 max-w-md mx-auto">
        <section id="sec-registros">
            <div class="glass p-5 rounded-3xl space-y-1">
                <label>Fecha del movimiento</label>
                <input type="date" id="reg-fecha">
                
                <label>Tipo de flujo</label>
                <select id="reg-tipo-flujo">
                    <option value="Ingreso">üü¢ Ingreso (Dinero entra)</option>
                    <option value="Gasto">üî¥ Gasto (Dinero sale)</option>
                </select>
                
                <label>Categor√≠a</label>
                <select id="reg-categoria">
                    <option value="Uber Diario">üöï Uber Diario</option>
                    <option value="Renta Carro">üîë Renta Carro</option>
                    <option value="Mantenimiento">üõ†Ô∏è Mantenimiento</option>
                    <option value="Internet">üåê Internet</option>
                    <option value="Gasolina">‚õΩ Gasolina</option>
                    <option value="Privado">üë§ Privado</option>
                    <option value="Otros">üì¶ Otros</option>
                </select>
                
                <label>Monto en Pesos/D√≥lares</label>
                <input type="number" id="reg-monto" placeholder="0.00" inputmode="decimal">
                
                <label>Nota opcional</label>
                <textarea id="reg-concepto" rows="2" placeholder="Ej: Pago de renta semana 45..."></textarea>
                
                <button onclick="saveRegistro()" class="btn-blue mt-4">üíæ GUARDAR REGISTRO</button>
            </div>
        </section>

        <section id="sec-viajes" class="hidden">
            <div class="glass p-5 rounded-3xl space-y-1">
                <input type="text" id="v-cliente" placeholder="Nombre del Cliente">
                <input type="number" id="v-costo" placeholder="Costo del viaje $" inputmode="decimal">
                <input type="date" id="v-fecha">
                <select id="v-tipo">
                    <option value="Cotizaci√≥n">üìÑ Cotizaci√≥n</option>
                    <option value="Agendado">üìÖ Agendado</option>
                    <option value="Realizado">‚úÖ Realizado</option>
                </select>
                <button onclick="saveViaje()" class="btn-blue">GUARDAR VIAJE</button>
            </div>
        </section>

        <section id="sec-diezmos" class="hidden">
            <div id="diezmo-info" class="glass p-6 rounded-3xl mb-4 text-center border-2 border-blue-500/20"></div>
            <div class="glass p-5 rounded-3xl">
                <label>Registrar entrega de diezmo</label>
                <input type="number" id="d-pago" placeholder="Monto entregado $" inputmode="decimal">
                <button onclick="saveDiezmo()" class="btn-blue bg-emerald-600">PAGAR DIEZMO</button>
            </div>
        </section>

        <section id="sec-resumen" class="hidden">
            <div id="resumen-container"></div>
            <button onclick="if(confirm('¬øSeguro que quieres borrar todos los datos?')) {localStorage.clear(); location.reload();}" class="mt-12 text-red-500/50 text-[10px] w-full uppercase tracking-widest font-bold">Reiniciar Aplicaci√≥n</button>
        </section>
    </main>

    <nav class="fixed bottom-0 left-0 right-0 bg-[#0f172a] border-t border-white/10 flex z-40 pb-2">
        <button onclick="nav('registros')" id="n-registros" class="nav-btn nav-active"><i data-lucide="edit-3"></i>Reg.</button>
        <button onclick="nav('viajes')" id="n-viajes" class="nav-btn"><i data-lucide="map-pin"></i>Viajes</button>
        <button onclick="nav('diezmos')" id="n-diezmos" class="nav-btn"><i data-lucide="heart"></i>Diezmo</button>
        <button onclick="nav('resumen')" id="n-resumen" class="nav-btn"><i data-lucide="pie-chart"></i>Total</button>
    </nav>

    <script>
        lucide.createIcons();
        document.getElementById('reg-fecha').valueAsDate = new Date();
        document.getElementById('v-fecha').valueAsDate = new Date();

        let db = JSON.parse(localStorage.getItem('lara_control_db_v6')) || { registros: [], viajes: [], diezmos: [] };

        function nav(s) {
