<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lara Control</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.0/lucide.min.js"></script>
    <style>
        body { background-color: #f0f2f5; font-family: -apple-system, sans-serif; margin: 0; padding-bottom: 100px; }
        /* Dise√±o tipo Glide: Tarjetas con bordes muy redondeados y sombras suaves */
        .glide-card { background: white; border-radius: 28px; padding: 24px; box-shadow: 0 8px 20px rgba(0,0,0,0.04); border: 1px solid #ffffff; margin-bottom: 20px; }
        .nav-bar { background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(15px); border-top: 1px solid rgba(0,0,0,0.05); }
        .nav-btn { flex: 1; display: flex; flex-direction: column; align-items: center; padding: 12px; color: #94a3b8; border: none; background: none; font-size: 10px; font-weight: 600; }
        .active-tab { color: #2563eb; }
        
        input, select, textarea { background: #f3f4f6 !important; border: 2px solid transparent !important; border-radius: 18px !important; padding: 16px !important; width: 100%; font-size: 16px; margin-bottom: 15px; -webkit-appearance: none; }
        input:focus { border-color: #3b82f6 !important; background: white !important; outline: none; }
        
        .btn-principal { background: #2563eb; color: white; font-weight: bold; padding: 18px; border-radius: 20px; width: 100%; border: none; font-size: 16px; box-shadow: 0 10px 20px rgba(37, 99, 235, 0.2); transition: 0.2s; }
        .btn-principal:active { transform: scale(0.97); background: #1d4ed8; }
        
        .label-input { font-size: 11px; font-weight: 700; color: #64748b; text-transform: uppercase; margin-left: 12px; margin-bottom: 6px; display: block; }
    </style>
</head>
<body>

    <header class="p-6 flex justify-between items-center bg-white/50 sticky top-0 z-50">
        <div>
            <h1 id="header-title" class="text-2xl font-black text-slate-800 tracking-tight">Nuevo</h1>
        </div>
        <img src="aa.jpg" class="h-11 w-11 rounded-2xl object-cover border-2 border-white shadow-md">
    </header>

    <main class="px-5 max-w-md mx-auto">
        
        <div id="pantalla-registros" class="seccion-app">
            <div class="glide-card">
                <span class="label-input">Fecha del movimiento</span>
                <input type="date" id="campo-fecha">

                <span class="label-input">Tipo</span>
                <select id="campo-tipo">
                    <option value="Ingreso">üü¢ Ingreso / Venta</option>
                    <option value="Gasto">üî¥ Gasto / Pago</option>
                </select>

                <span class="label-input">Categor√≠a</span>
                <select id="campo-categoria">
                    <option value="Uber Diario">üöï Uber Diario</option>
                    <option value="Renta Carro">üîë Renta Carro</option>
                    <option value="Gasolina">‚õΩ Gasolina</option>
                    <option value="Mantenimiento">üõ†Ô∏è Mantenimiento</option>
                    <option value="Internet">üåê Internet</option>
                    <option value="Otros">üì¶ Otros</option>
                </select>

                <span class="label-input">Monto en $</span>
                <input type="number" id="campo-monto" placeholder="0.00" inputmode="decimal">

                <button onclick="ejecutarGuardado()" class="btn-principal">Guardar en mi lista</button>
            </div>
        </div>

        <div id="pantalla-viajes" class="seccion-app hidden">
            <div class="glide-card text-center">
                <p class="text-slate-400">Pr√≥ximamente: Agenda de viajes</p>
            </div>
        </div>

        <div id="pantalla-balance" class="seccion-app hidden">
            <div id="contenedor-balance"></div>
        </div>

    </main>

    <nav class="nav-bar fixed bottom-0 left-0 right-0 flex pb-8 pt-2 z-50">
        <button onclick="cambiarTab('registros')" id="t-registros" class="nav-btn active-tab">
            <i data-lucide="plus-circle"></i><span>Nuevo</span>
        </button>
        <button onclick="cambiarTab('viajes')" id="t-viajes" class="nav-btn">
            <i data-lucide="calendar"></i><span>Viajes</span>
        </button>
        <button onclick="cambiarTab('balance')" id="t-balance" class="nav-btn">
            <i data-lucide="pie-chart"></i><span>Balance</span>
        </button>
    </nav>

    <script>
        // Inicializar iconos y fecha
        lucide.createIcons();
        document.getElementById('campo-fecha').valueAsDate = new Date();

        // Cargar Base de Datos
        let datosApp = JSON.parse(localStorage.getItem('LARA_CONTROL_DB')) || [];

        function cambiarTab(pesta√±a) {
            // Ocultar todas
            document.querySelectorAll('.seccion-app').forEach(s => s.classList.add('hidden'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active-tab'));
            
            // Mostrar seleccionada
            document.getElementById('pantalla-' + pesta√±a).classList.remove('hidden');
            document.getElementById('t-' + pesta√±a).classList.add('active-tab');
            
            const titulos = { registros: 'Nuevo', viajes: 'Mis Viajes', balance: 'Balance' };
            document.getElementById('header-title').innerText = titulos[pesta√±a];

            if(pesta√±a === 'balance') dibujarBalance();
        }

        function ejecutarGuardado() {
            const montoInput = document.getElementById('campo-monto');
            const valorMonto = parseFloat(montoInput.value);

            if (!valorMonto || valorMonto <= 0) {
                alert("‚ö†Ô∏è Por favor ingresa un monto mayor a 0");
                return;
            }

            // Crear el objeto del registro
            const nuevoRegistro = {
                fecha: document.getElementById('campo-fecha').value,
                tipo: document.getElementById('campo-tipo').value,
                cat: document.getElementById('campo-categoria').value,
                monto: valorMonto
            };

            // Guardar en el arreglo y luego en el celular
            datosApp.push(nuevoRegistro);
            localStorage.setItem('LARA_CONTROL_DB', JSON.stringify(datosApp));

            // Notificaci√≥n visual
            alert("‚úÖ ¬°Registro Guardado con √âxito!");

            // Limpiar campo
            montoInput.value = "";
        }

        function dibujarBalance() {
            let ingresos = 0;
            let gastos = 0;

            datosApp.forEach(item => {
                if(item.tipo === 'Ingreso') ingresos += item.monto;
                else gastos += item.monto;
            });

            const total = ingresos - gastos;

            document.getElementById('contenedor-balance').innerHTML = `
                <div class="glide-card bg-blue-600 text-white text-center">
                    <p class="text-xs font-bold opacity-80 uppercase mb-1">Balance Neto</p>
                    <h2 class="text-4xl font-black">$${total.toLocaleString()}</h2>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div class="glide-card p-4 text-center">
                        <p class="text-[10px] font-bold text-emerald-500 uppercase">Ventas</p>
                        <p class="text-xl font-bold text-slate-700">$${ingresos.toLocaleString()}</p>
                    </div>
                    <div class="glide-card p-4 text-center">
                        <p class="text-[10px] font-bold text-red-400 uppercase">Gastos</p>
                        <p class="text-xl font-bold text-slate-700">$${gastos.toLocaleString()}</p>
                    </div>
                </div>
            `;
        }
    </script>
</body>
</html>
